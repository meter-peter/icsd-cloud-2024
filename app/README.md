# RESTful Υπηρεσία Διαχείρισης Χρηστών

## Πίνακας Περιεχομένων
1. [Προαπαιτούμενα](#προαπαιτούμενα)
2. [Εγκατάσταση PostgreSQL σε Ubuntu](#εγκατάσταση-postgresql-σε-ubuntu)
3. [Αρχικοποίηση Βάσης Δεδομένων](#αρχικοποίηση-βάσης-δεδομένων)
4. [Εγκατάσταση και Ρύθμιση της Εφαρμογής](#εγκατάσταση-και-ρύθμιση-της-εφαρμογής)
5. [Εκτέλεση της Εφαρμογής](#εκτέλεση-της-εφαρμογής)
6. [Δομή Έργου](#δομή-έργου)
7. [API Endpoints](#api-endpoints)
8. [Αντιμετώπιση Προβλημάτων](#αντιμετώπιση-προβλημάτων)

## Προαπαιτούμενα

- Ubuntu 20.04 ή νεότερη έκδοση
- Go 1.16 ή νεότερη έκδοση
- Git

## Εγκατάσταση PostgreSQL σε Ubuntu

1. Ενημερώνουμε τη λίστα πακέτων:
   ```
   sudo apt update
   ```

2. Εγκαθιστούμε την PostgreSQL και το εργαλείο psql:
   ```
   sudo apt install postgresql postgresql-contrib
   ```

3. Επιβεβαιώνουμε ότι η υπηρεσία τρέχει:
   ```
   sudo systemctl status postgresql
   ```

4. Συνδεόμαστε στον προεπιλεγμένο χρήστη postgres:
   ```
   sudo -i -u postgres
   ```

5. Δημιουργούμε έναν νέο χρήστη για την εφαρμογή μας:
   ```
   createuser --interactive --pwprompt
   ```
   Ακολουθούμε τις οδηγίες για να δημιουργήσουμε τον χρήστη (π.χ., όνομα: your_username).

6. Δημιουργούμε μια νέα βάση δεδομένων:
   ```
   createdb -O your_username your_database_name
   ```

7. Εξερχόμαστε από τον χρήστη postgres:
   ```
   exit
   ```

## Αρχικοποίηση Βάσης Δεδομένων

1. Πλοηγούμαστε στον φάκελο του έργου:
   ```
   cd /path/to/icsd-cloud-2024
   ```

2. Εκτελούμε το SQL script για να αρχικοποιήσουμε τη βάση δεδομένων:
   ```
   sudo -u postgres psql -d your_database_name -f migrations/init.sql
   ```

## Εγκατάσταση και Ρύθμιση της Εφαρμογής

1. Κλωνοποιούμε το αποθετήριο (αν δεν το έχουμε ήδη κάνει):
   ```
   git clone https://github.com/your-username/icsd-cloud-2024.git
   cd icsd-cloud-2024/app
   ```

2. Εγκαθιστούμε τις απαραίτητες εξαρτήσεις:
   ```
   go mod tidy
   ```

3. Δημιουργούμε ένα αρχείο .env στον φάκελο app:
   ```
   touch .env
   ```

4. Ανοίγουμε το .env με έναν επεξεργαστή κειμένου και προσθέτουμε:
   ```
   DB_HOST=localhost
   DB_USER=your_username
   DB_PASSWORD=your_password
   DB_NAME=your_database_name
   DB_PORT=5432
   SERVER_PORT=8080
   ```
   Αντικαθιστούμε τα your_username, your_password και your_database_name με τις τιμές που χρησιμοποιήσαμε κατά τη δημιουργία της βάσης δεδομένων.

## Εκτέλεση της Εφαρμογής

1. Από τον φάκελο app, εκτελούμε:
   ```
   go run cmd/main.go
   ```

2. Η εφαρμογή θα ξεκινήσει και θα ακούει στη διεύθυνση `http://localhost:8080`.

## Δομή Έργου

- `cmd/main.go`: Το σημείο εισόδου της εφαρμογής.
- `internal/`: Περιέχει τον εσωτερικό κώδικα της εφαρμογής.
  - `handlers/`: Χειριστές HTTP αιτημάτων.
  - `models/`: Μοντέλα δεδομένων.
  - `routes/`: Ορισμοί διαδρομών.
  - `validators/`: Λογική επικύρωσης δεδομένων.
- `go.mod` και `go.sum`: Αρχεία διαχείρισης εξαρτήσεων.
- `.env`: Αρχείο περιβαλλοντικών μεταβλητών.

## API Endpoints

- `GET /users`: Ανάκτηση όλων των χρηστών
- `GET /users/:id`: Ανάκτηση συγκεκριμένου χρήστη
- `POST /users`: Δημιουργία νέου χρήστη
- `PUT /users/:id`: Ενημέρωση υπάρχοντος χρήστη
- `DELETE /users/:id`: Διαγραφή χρήστη
- `GET /users/search`: Αναζήτηση χρηστών με βάση κριτήρια

## Swagger UI

Μετά την εκκίνηση της εφαρμογής, μπορείτε να αποκτήσετε πρόσβαση στο Swagger UI στην ακόλουθη διεύθυνση:

http://localhost:8080/swagger/index.html

Εδώ θα βρείτε μια διαδραστική τεκμηρίωση του API με έτοιμα endpoints και requests προς δοκιμή.

## Αντιμετώπιση Προβλημάτων

1. **Πρόβλημα σύνδεσης με τη βάση δεδομένων**: 
   - Βεβαιωθείτε ότι η PostgreSQL τρέχει: `sudo systemctl status postgresql`
   - Ελέγξτε τις ρυθμίσεις στο αρχείο .env
   - Βεβαιωθείτε ότι ο χρήστης της βάσης δεδομένων έχει τα κατάλληλα δικαιώματα

2. **Η εφαρμογή δεν ξεκινά**:
   - Ελέγξτε τα logs για τυχόν σφάλματα
   - Βεβαιωθείτε ότι όλες οι εξαρτήσεις έχουν εγκατασταθεί σωστά

3. **Σφάλματα κατά την εκτέλεση των endpoints**:
   - Ελέγξτε τη μορφή των δεδομένων που στέλνετε
   - Βεβαιωθείτε ότι ακολουθείτε τους κανόνες επικύρωσης για κάθε πεδίο

